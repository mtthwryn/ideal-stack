---
import type { CollectionEntry } from 'astro:content'
import { Image } from 'astro:assets'
import FormattedDate from '@/components/FormattedDate'
import Tag from '@/components/Tag'

type Props = {
	post: CollectionEntry<'blog'>
	readTime: string
}

const { post, readTime } = Astro.props
const { title, description, pubDate, heroImage, tags, category } = post.data
---

<article
	class='group relative overflow-hidden rounded-2xl bg-white dark:bg-stone-900/40 border border-stone-200 dark:border-stone-800 shadow-lg hover:shadow-xl transition-all duration-300'
>
	<a href={`/post/${post.slug}/`} class='block' aria-label={`Read featured post: ${title}`}>
		<div class='grid md:grid-cols-2 gap-0'>
			<!-- Image Section -->
			<div class='relative h-64 md:h-auto overflow-hidden'>
				<Image
					src={heroImage}
					width={800}
					height={600}
					format='webp'
					class='h-full w-full object-cover group-hover:scale-110 transition-transform duration-700'
					alt={`${title} - ${description || 'Featured blog post'}`}
					loading='eager'
				/>
				<div class='absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent'>
				</div>
				<div class='absolute bottom-4 left-4 right-4 text-white'>
					<span
						class='inline-block px-3 py-1 bg-white/20 backdrop-blur-sm rounded-full text-sm font-semibold'
					>
						{category}
					</span>
				</div>
			</div>

			<!-- Content Section -->
			<div class='p-6 md:p-8 flex flex-col justify-between'>
				<div class='space-y-4'>
					<div class='flex items-center gap-3 text-sm text-stone-500 dark:text-stone-400'>
						<FormattedDate date={pubDate} />
						<span>•</span>
						<span>{readTime}</span>
					</div>
					<h2
						class='text-2xl md:text-3xl font-bold text-stone-900 dark:text-white group-hover:text-stone-600 dark:group-hover:text-stone-300 transition-colors line-clamp-2'
					>
						{title}
					</h2>
					<p class='text-stone-600 dark:text-stone-400 leading-relaxed line-clamp-3'>
						{description}
					</p>
					<div class='flex flex-wrap gap-2 pt-2'>
						{tags.slice(0, 3).map((tag) => <Tag tag={tag} />)}
					</div>
				</div>
				<div class='pt-6 mt-6 border-t border-stone-200 dark:border-stone-800'>
					<span
						class='text-stone-700 dark:text-stone-300 font-semibold group-hover:text-stone-900 dark:group-hover:text-white transition-colors'
					>
						Read Article →
					</span>
				</div>
			</div>
		</div>
	</a>
</article>
