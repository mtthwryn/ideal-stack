---
import FormattedDate from '@/components/FormattedDate'
import ArrowUp from '@/components/icons/ArrowUp'
import Tag from '@/components/Tag'

const {
	id,
	data: { title, description, pubDate, category, tags },
	readTime,
	slug
} = Astro.props
---

<a
	href={`/post/${slug}/`}
	class='flex flex-col min-h-full group bg-white dark:bg-stone-900/40 border border-stone-200 dark:border-stone-800 rounded-xl overflow-hidden shadow-sm hover:shadow-lg hover:border-stone-300 dark:hover:border-stone-700 transition-all duration-300'
	aria-label={`Read post: ${title}`}
>
	<div class='flex justify-between flex-col gap-1 md:gap-0 py-4 px-5'>
		<div class='flex flex-col gap-2'>
			<div class='flex flex-col gap-1.5'>
				<h3
					class='text-xl md:text-2xl font-bold -tracking-wider text-stone-900 dark:text-white group-hover:text-stone-600 dark:group-hover:text-stone-300 transition-colors line-clamp-2'
				>
					{title}
				</h3>
			</div>

			<div class='flex items-center gap-2 text-stone-600 dark:text-stone-400'>
				<FormattedDate date={pubDate} />
				<span>â€¢</span>
				<span class='text-sm font-medium'>{readTime}</span>
			</div>

			<p
				class='overflow-hidden text-stone-600 dark:text-stone-400 mb-1 font-[400] leading-relaxed text-sm md:text-base line-clamp-4'
			>
				{description}
			</p>

			<!-- Category and Tag Badges -->
			<div class='flex flex-row flex-wrap gap-2 items-center'>
				<span
					class='inline-block px-3 py-1 bg-purple-600/60 backdrop-blur-sm font-semibold text-white dark:bg-purple-900/60 dark:text-white shadow text-sm rounded-full'
				>
					{category}
				</span>
				{
					tags &&
						tags.length > 0 &&
						tags.map((tag: string) => (
							<span class='inline-block px-3 py-1 bg-indigo-600/60 backdrop-blur-sm font-semibold text-white dark:bg-indigo-900/60 dark:text-white shadow text-sm rounded-full'>
								{tag}
							</span>
						))
				}
			</div>

			<div
				class='flex justify-end items-center text-stone-700 dark:text-stone-300 group-hover:text-stone-900 dark:group-hover:text-white transition-all duration-200 ease-in-out font-semibold gap-1.5 mt-4'
			>
				<span>Read Post</span>
				<span
					class='mt-[1px] group-hover:rotate-45 transition-transform duration-250 ease-in-out inline-block'
					><ArrowUp width='18' height='18' /></span
				>
			</div>
		</div>
	</div>
</a>
